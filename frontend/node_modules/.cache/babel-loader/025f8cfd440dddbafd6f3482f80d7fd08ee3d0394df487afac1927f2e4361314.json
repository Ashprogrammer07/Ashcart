{"ast":null,"code":"import{Fragment,useEffect}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{toast}from\"react-toastify\";import{clearerror}from\"../../slices/productsSlice\";import{DeleteProduct,getAdminProducts}from\"../../actions/productsActions\";import MetaData from\"../layouts/MetaData\";import Loader from'../layouts/loader';import{MDBDataTable}from'mdbreact';import Sidebar from\"./sidebar\";import{clearProductDeleted}from\"../../slices/productSlice\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PorductList(){const{products,loading,error}=useSelector(state=>state.productsState);const{isproductDeleted,error:deleteerror}=useSelector(state=>state.productState);const dispatch=useDispatch();const setProducts=products=>{const data={columns:[{label:\"ID\",field:'id',sort:'asc'},{label:\"price\",field:'price',sort:'asc'},{label:\"stock\",field:'stock',sort:'asc'},{label:\"Actions\",field:'actions',sort:'asc'}],rows:[]};products.forEach(product=>{data.rows.push({id:product._id,price:\"$\".concat(product.price),stock:product.stock,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/products/\".concat(product._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-danger py--1 px-2 ml-2\",onClick:e=>deleteHandler(e,product._id)// optional\n,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};useEffect(()=>{if(error||deleteerror){toast(error||deleteerror,{type:\"error\",position:'bottom-center',onOpen:()=>{dispatch(clearerror);}});return;}if(isproductDeleted){toast(\"Product Deleted Successfully!!!\",{type:'success',position:'bottom-center',onOpen:()=>{clearProductDeleted();}});return;}dispatch(getAdminProducts);},[dispatch,error,isproductDeleted]);const deleteHandler=(e,id)=>{e.target.disabled=true;dispatch(DeleteProduct(id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(MetaData,{title:\"Product list\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"Product List\"}),/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(products),bordered:true,striped:true,hover:true,className:\"px-3\"})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","Button","useDispatch","useSelector","Link","toast","clearerror","DeleteProduct","getAdminProducts","MetaData","Loader","MDBDataTable","Sidebar","clearProductDeleted","jsx","_jsx","jsxs","_jsxs","PorductList","products","loading","error","state","productsState","isproductDeleted","deleteerror","productState","dispatch","setProducts","data","columns","label","field","sort","rows","forEach","product","push","id","_id","price","concat","stock","actions","children","to","className","onClick","e","deleteHandler","type","position","onOpen","target","disabled","title","bordered","striped","hover"],"sources":["/home/ashwin/Documents/GitHub/Ashcart/frontend/src/components/admin/productList.js"],"sourcesContent":["import { Fragment, useEffect } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { clearerror } from \"../../slices/productsSlice\";\nimport { DeleteProduct, getAdminProducts } from \"../../actions/productsActions\";\nimport MetaData from \"../layouts/MetaData\";\nimport Loader from '../layouts/loader'\nimport {MDBDataTable} from 'mdbreact';\nimport Sidebar from \"./sidebar\";\nimport { clearProductDeleted } from \"../../slices/productSlice\";\nexport default function PorductList(){\n    const {products,loading,error}=useSelector(state => state.productsState);\n    const {isproductDeleted,error:deleteerror}=useSelector(state=>state.productState)\n    const dispatch=useDispatch();\n    const setProducts=(products)=>{\n        const data={\n            columns:[\n                {label:\"ID\",field:'id',sort:'asc'},\n                {label:\"price\",field:'price',sort:'asc'},\n                {label:\"stock\",field:'stock',sort:'asc'},\n                {label:\"Actions\",field:'actions',sort:'asc'},\n            ],\n            rows:[]\n            \n        };\n         products.forEach((product) => {\n    data.rows.push({\n      id: product._id,\n      price: `$${product.price}`,\n      stock: product.stock,\n      actions: (\n        <Fragment>\n          <Link\n            to={`/admin/products/${product._id}`}\n            className=\"btn btn-primary\"\n          >\n            <i className=\"fa fa-pencil\"></i>\n          </Link>\n          <Button\n            className=\"btn btn-danger py--1 px-2 ml-2\"\n            onClick={(e) => deleteHandler(e,product._id)} // optional\n          >\n            <i className=\"fa fa-trash\"></i>\n          </Button>\n        </Fragment>\n      ),\n    });\n  });\n \n\n  return data;\n};\n    useEffect(()=>{\n        if(error|| deleteerror){\n            toast(error|| deleteerror,{\n                type:\"error\",position:'bottom-center',onOpen:()=>{dispatch(clearerror)}\n            })\n            return;\n        }\n        if(isproductDeleted){\n          toast(\"Product Deleted Successfully!!!\",{\n            type:'success',position:'bottom-center',onOpen:()=>{clearProductDeleted()}\n          })\n          return;\n        }\n        dispatch(getAdminProducts)\n    },[dispatch,error,isproductDeleted])\n\n     const deleteHandler=(e,id)=>{\n    e.target.disabled=true;\n    dispatch(DeleteProduct(id))\n  }\n    return(\n                <div className=\"row\">\n                    <MetaData title={\"Product list\"}/>\n                    \n                    <div className=\"col-12 col-md-2\">\n                                        <Sidebar/>\n                                    </div>\n                    <div className=\"col-12 col-md-10\">\n                    <h1 className=\"my-4\">Product List</h1>\n                    <Fragment>\n                        {loading?<Loader/>:\n                        <MDBDataTable\n                        data={setProducts(products)}\n                        bordered\n                        striped\n                        hover\n                        className='px-3'/>}\n                    </Fragment>\n                           \n                </div>\n                </div>\n             \n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}