{"ast":null,"code":"import{Fragment,jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";import MetaData from'../layouts/MetaData';import Sidebar from\"./sidebar\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from'react-redux';import{useNavigate,useParams,Link}from\"react-router-dom\";import{toast}from'react-toastify';import Loader from'../layouts/loader';import{GetUser,updateUser}from\"../../actions/adminuserActions\";import{clearupdateerror,clearUserError}from\"../../slices/userSlices\";export default function UpdateUser(){const{loading,isuserupdated,error,user={}}=useSelector(state=>state.userState);const{user:authuser={}}=useSelector(state=>state.authState);const[name,setname]=useState(\"\");const[email,setemail]=useState(\"\");const[role,setrole]=useState(\"\");const dispatch=useDispatch();const{id}=useParams();const navigate=useNavigate();const onsubmitHandler=e=>{e.preventDefault();const formdata=new FormData();formdata.append('name',name);formdata.append('email',email);formdata.append('role',role);dispatch(updateUser(id,formdata));};useEffect(()=>{if(isuserupdated){toast.success(\"User Updated Successfully\",{position:'bottom-center',onOpen:()=>dispatch(clearupdateerror())});}if(error){toast.error(error,{position:'bottom-center',onOpen:()=>dispatch(clearUserError())});}dispatch(GetUser(id));},[dispatch,error,isuserupdated,id]);useEffect(()=>{if(user._id){setname(user.name);setemail(user.email);setrole(user.role);}},[user]);if(!user)return/*#__PURE__*/_jsx(Loader,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(MetaData,{title:\"Update User\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper my-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",encType:\"multipart/form-data\",onSubmit:onsubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name_field\",className:\"form-control\",value:name,onChange:e=>setname(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"price_field\",className:\"form-control\",value:email,onChange:e=>setemail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category_field\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{disabled:user._id===authuser._id,className:\"form-control\",id:\"category_field\",onChange:e=>setrole(e.target.value),value:role,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsx(\"button\",{id:\"login_button\",type:\"submit\",className:\"btn btn-block py-3\",disabled:loading,children:\"UPDATE USER\"})]})})})})]});}","map":{"version":3,"names":["Fragment","jsx","_jsx","jsxs","_jsxs","MetaData","Sidebar","useEffect","useState","useDispatch","useSelector","useNavigate","useParams","Link","toast","Loader","GetUser","updateUser","clearupdateerror","clearUserError","UpdateUser","loading","isuserupdated","error","user","state","userState","authuser","authState","name","setname","email","setemail","role","setrole","dispatch","id","navigate","onsubmitHandler","e","preventDefault","formdata","FormData","append","success","position","onOpen","_id","className","children","title","encType","onSubmit","htmlFor","type","value","onChange","target","disabled"],"sources":["/home/ashwin/Documents/GitHub/Ashcart/frontend/src/components/admin/updatuser.js"],"sourcesContent":["import { Fragment } from \"react/jsx-runtime\";\nimport MetaData from '../layouts/MetaData';\nimport Sidebar from \"./sidebar\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate, useParams, Link } from \"react-router-dom\";\nimport { toast } from 'react-toastify';\nimport Loader from '../layouts/loader';\nimport { GetUser, updateUser } from \"../../actions/adminuserActions\";\nimport { clearupdateerror, clearUserError } from \"../../slices/userSlices\";\n\n\n\nexport default function UpdateUser() {\n  const{loading,isuserupdated,error,user={}}=useSelector(state=>state.userState);\n  const{user:authuser={}}=useSelector(state=>state.authState);\n  \n  const [name,setname]=useState(\"\");\n  const [email,setemail]=useState(\"\");\n  const [role,setrole]=useState(\"\");\n\n  const dispatch = useDispatch();\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const onsubmitHandler = (e) => {\n    e.preventDefault();\n    const formdata= new FormData();\n    formdata.append('name',name);\n    formdata.append('email',email);\n    formdata.append('role',role);\n    dispatch(updateUser(id,formdata ));\n  };\n\n  useEffect(() => {\n    if (isuserupdated) {\n      toast.success(\"User Updated Successfully\", {\n        position: 'bottom-center',\n        onOpen: () => dispatch(clearupdateerror())\n      });\n    }\n\n    if (error) {\n      toast.error(error, {\n        position: 'bottom-center',\n        onOpen: () => dispatch(clearUserError())\n      });\n    }\n\n    dispatch(GetUser(id));\n  }, [dispatch, error, isuserupdated, id]);\n\n  useEffect(()=>{\n    if(user._id){\n        setname(user.name);\n        setemail(user.email);\n        setrole(user.role);\n    }\n  },[user])\n\n  \n\n  if (!user) return <Loader />;\n\n  return (\n    <div className=\"row\">\n      <MetaData title={\"Update User\"} />\n      <div className=\"col-12 col-md-2\">\n        <Sidebar />\n      </div>\n\n      <div className=\"col-12 col-md-10\">\n        <Fragment>\n          <div className=\"wrapper my-5\"> \n        <form className=\"shadow-lg\" encType='multipart/form-data'onSubmit={onsubmitHandler}>\n            <h1 className=\"mb-4\">Update User</h1>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"name_field\">Name</label>\n              <input\n                type=\"text\"\n                id=\"name_field\"\n                className=\"form-control\"\n                value={name}\n                onChange={(e)=>setname(e.target.value)}\n              />\n            </div>\n\n            <div className=\"form-group\">\n                <label htmlFor=\"price_field\">Email</label>\n                <input\n                  type=\"text\"\n                  id=\"price_field\"\n                  className=\"form-control\"\n                  value={email}\n                  onChange={(e)=>setemail(e.target.value)}\n                />\n              </div>\n\n              \n\n              <div className=\"form-group\">\n                <label htmlFor=\"category_field\">Role</label>\n                <select disabled={user._id===authuser._id} className=\"form-control\" id=\"category_field\" onChange={(e)=>setrole(e.target.value)} value={role}>\n                    <option value=''>Select</option>\n                    <option value='user'>User</option>\n                    <option value='admin'>Admin</option>\n                  </select>\n              </div>\n\n  \n            <button\n              id=\"login_button\"\n              type=\"submit\"\n              className=\"btn btn-block py-3\"\n              disabled={loading}\n          \n            >\n              UPDATE USER\n            </button>\n\n          </form>\n </div>\n        </Fragment>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}