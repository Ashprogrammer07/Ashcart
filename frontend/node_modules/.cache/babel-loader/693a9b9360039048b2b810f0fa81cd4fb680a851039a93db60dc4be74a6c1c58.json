{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{toast}from\"react-toastify\";import{updateProfile,clearAutherror}from\"../../actions/userActions\";import{clearUpdateProfile}from\"../../slices/authSlices\";import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateProfile(){const{error,user,isupdated}=useSelector(state=>state.authState);const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[avatar,setAvatar]=useState(\"\");const[avatarPreview,setAvatarPreview]=useState(\"/images/default_avatar.png\");const dispatch=useDispatch();const onChangeAvatar=e=>{const reader=new FileReader();reader.onload=()=>{if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(e.target.files[0]);}};reader.readAsDataURL(e.target.files[0]);};const submitHandler=e=>{e.preventDefault();const formData=new FormData();formData.append('name',name);formData.append('email',email);formData.append('avatar',avatar);dispatch(updateProfile(formData));};useEffect(()=>{if(user){setName(user.name);setEmail(user.email);if(user.avatar){setAvatarPreview(user.avatar);}}if(isupdated){toast('Profile updated successfully',{type:'success',position:'bottom-center',onOpen:()=>dispatch(clearUpdateProfile())});return;}if(error){toast(error,{position:'bottom-center',type:'error',onOpen:()=>{dispatch(clearAutherror);}});return;}},[user,isupdated,error,dispatch]);return/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"shadow-lg\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2 mb-5\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"Avatar Preview\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",onChange:onChangeAvatar}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn update-btn btn-block mt-4 mb-3\",children:\"Update\"})]})})});}","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","toast","updateProfile","clearAutherror","clearUpdateProfile","jsx","_jsx","jsxs","_jsxs","UpdateProfile","error","user","isupdated","state","authState","name","setName","email","setEmail","avatar","setAvatar","avatarPreview","setAvatarPreview","dispatch","onChangeAvatar","e","reader","FileReader","onload","readyState","result","target","files","readAsDataURL","submitHandler","preventDefault","formData","FormData","append","type","position","onOpen","className","children","onSubmit","encType","htmlFor","id","value","onChange","src","alt"],"sources":["/home/ashwin/Documents/GitHub/Ashcart/frontend/src/components/user/updateprofile.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { toast } from \"react-toastify\";\nimport { updateProfile, clearAutherror } from \"../../actions/userActions\";\nimport { clearUpdateProfile } from \"../../slices/authSlices\";\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function UpdateProfile () {\n    const {  error, user, isupdated } = useSelector(state => state.authState);\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [avatar, setAvatar] = useState(\"\");\n    const [avatarPreview, setAvatarPreview] = useState(\"/images/default_avatar.png\");\n    const dispatch = useDispatch();\n\n    const onChangeAvatar = (e) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n             if(reader.readyState === 2) {\n                 setAvatarPreview(reader.result);\n                 setAvatar(e.target.files[0])\n             }\n        }\n\n\n        reader.readAsDataURL(e.target.files[0])\n    }\n\n    const submitHandler  = (e) =>{\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('name', name)\n        formData.append('email', email)\n        formData.append('avatar', avatar);\n        dispatch(updateProfile(formData))\n    }\n\n    useEffect(() => {\n        if(user) {\n            setName(user.name);\n            setEmail(user.email);\n            if(user.avatar) {\n                setAvatarPreview(user.avatar)\n            }\n        }\n\n        if(isupdated) {\n            toast('Profile updated successfully',{\n                type: 'success',\n                position: 'bottom-center',\n                onOpen: () => dispatch(clearUpdateProfile())\n            })\n            return;\n        }\n\n        if(error)  {\n            toast(error, {\n                position: 'bottom-center',\n                type: 'error',\n                onOpen: ()=> { dispatch(clearAutherror) }\n            })\n            return\n        }\n    },[user, isupdated, error, dispatch])\n\n    return (  \n    <div className=\"row wrapper\">\n        <div className=\"col-10 col-lg-5\">\n            <form onSubmit={submitHandler} className=\"shadow-lg\" encType='multipart/form-data'>\n                <h1 className=\"mt-2 mb-5\">Update Profile</h1>\n\n                <div className=\"form-group\">\n                    <label htmlFor=\"email_field\">Name</label>\n                    <input \n                        type=\"name\" \n                        id=\"name_field\" \n                        className=\"form-control\"\n                        name='name'\n                        value={name}\n                        onChange={e=>setName(e.target.value)}\n                    />\n                </div>\n\n                <div className=\"form-group\">\n                    <label htmlFor=\"email_field\">Email</label>\n                    <input\n                        type=\"email\"\n                        id=\"email_field\"\n                        className=\"form-control\"\n                        name='email'\n                        value={email}\n                        onChange={e=>setEmail(e.target.value)}\n                    />\n                </div>\n\n                <div className='form-group'>\n                    <label htmlFor='avatar_upload'>Avatar</label>\n                    <div className='d-flex align-items-center'>\n                        <div>\n                            <figure className='avatar mr-3 item-rtl'>\n                                <img\n                                    src={avatarPreview}\n                                    className='rounded-circle'\n                                    alt='Avatar Preview'\n                                />\n                            </figure>\n                        </div>\n                        <div className='custom-file'>\n                            <input\n                                type='file'\n                                name='avatar'\n                                className='custom-file-input'\n                                id='customFile'\n                                onChange={onChangeAvatar}\n                            />\n                            <label className='custom-file-label' htmlFor='customFile'>\n                                Choose Avatar\n                        </label>\n                        </div>\n                    </div>\n                </div>\n\n                <button type=\"submit\" className=\"btn update-btn btn-block mt-4 mb-3\" >Update</button>\n            </form>\n        </div>\n    </div>)\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}