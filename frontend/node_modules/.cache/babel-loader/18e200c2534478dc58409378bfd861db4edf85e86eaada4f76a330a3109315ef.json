{"ast":null,"code":"import{Fragment,useEffect,useMemo}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{toast}from\"react-toastify\";import MetaData from\"../layouts/MetaData\";import Loader from\"../layouts/loader\";import{MDBDataTable}from\"mdbreact\";import Sidebar from\"./sidebar\";import{DeleteUser,GetallUsers}from\"../../actions/adminuserActions\";import{clearUserError,clearOrderDeleted,cleardeleteerror}from\"../../slices/userSlices\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserList(){const dispatch=useDispatch();const{users=[],loading,error,isuserdeleted}=useSelector(state=>state.userState);const deleteHandler=(e,id)=>{e.target.disabled=true;dispatch(DeleteUser(id));};// Fetch users on mount\nuseEffect(()=>{dispatch(GetallUsers());},[dispatch]);// Handle error toast\nuseEffect(()=>{if(error){toast.error(error,{position:\"bottom-center\"});dispatch(clearUserError());}},[error,dispatch]);// Handle delete success\nuseEffect(()=>{if(isuserdeleted){toast.success(\"User Deleted Successfully!!!\",{position:\"bottom-center\"});dispatch(cleardeleteerror());dispatch(GetallUsers());}},[isuserdeleted,dispatch]);// Build table data\nconst data=useMemo(()=>{return{columns:[{label:\"ID\",field:\"id\",sort:\"asc\"},{label:\"Name\",field:\"name\",sort:\"asc\"},{label:\"Email\",field:\"email\",sort:\"asc\"},{label:\"Role\",field:\"role\",sort:\"asc\"},{label:\"Actions\",field:\"actions\",sort:\"asc\"}],rows:users.map(user=>({id:user._id,name:user.name,email:user.email,role:user.role,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/user/\".concat(user._id),className:\"btn btn-primary btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-danger btn-sm ml-2\",onClick:e=>deleteHandler(e,user._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})}))};},[users]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(MetaData,{title:\"Users List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"Users List\"}),/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:data,bordered:true,striped:true,hover:true,className:\"px-3\"})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","useMemo","Button","useDispatch","useSelector","Link","toast","MetaData","Loader","MDBDataTable","Sidebar","DeleteUser","GetallUsers","clearUserError","clearOrderDeleted","cleardeleteerror","jsx","_jsx","jsxs","_jsxs","UserList","dispatch","users","loading","error","isuserdeleted","state","userState","deleteHandler","e","id","target","disabled","position","success","data","columns","label","field","sort","rows","map","user","_id","name","email","role","actions","children","to","concat","className","onClick","title","bordered","striped","hover"],"sources":["/home/ashwin/Documents/GitHub/Ashcart/frontend/src/components/admin/userList.js"],"sourcesContent":["import { Fragment, useEffect, useMemo } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nimport MetaData from \"../layouts/MetaData\";\nimport Loader from \"../layouts/loader\";\nimport { MDBDataTable } from \"mdbreact\";\nimport Sidebar from \"./sidebar\";\nimport { DeleteUser, GetallUsers } from \"../../actions/adminuserActions\";\nimport { clearUserError, clearOrderDeleted, cleardeleteerror } from \"../../slices/userSlices\";\n\nexport default function UserList() {\n  const dispatch = useDispatch();\n\n  const {\n    users = [],\n    loading,\n    error,\n    isuserdeleted,\n  } = useSelector((state) => state.userState);\n\n  const deleteHandler = (e, id) => {\n    e.target.disabled = true;\n    dispatch(DeleteUser(id));\n  };\n\n  // Fetch users on mount\n  useEffect(() => {\n    dispatch(GetallUsers());\n  }, [dispatch]);\n\n  // Handle error toast\n  useEffect(() => {\n    if (error) {\n      toast.error(error, { position: \"bottom-center\" });\n      dispatch(clearUserError());\n    }\n  }, [error, dispatch]);\n\n  // Handle delete success\n  useEffect(() => {\n    if (isuserdeleted) {\n      toast.success(\"User Deleted Successfully!!!\", {\n        position: \"bottom-center\",\n      });\n      dispatch(cleardeleteerror());\n      dispatch(GetallUsers());\n    }\n  }, [isuserdeleted, dispatch]);\n\n  // Build table data\n  const data = useMemo(() => {\n    return {\n      columns: [\n        { label: \"ID\", field: \"id\", sort: \"asc\" },\n        { label: \"Name\", field: \"name\", sort: \"asc\" },\n        { label: \"Email\", field: \"email\", sort: \"asc\" },\n        { label: \"Role\", field: \"role\", sort: \"asc\" },\n        { label: \"Actions\", field: \"actions\", sort: \"asc\" },\n      ],\n      rows: users.map((user) => ({\n        id: user._id,\n        name: user.name,\n        email: user.email,\n        role: user.role,\n        actions: (\n          <Fragment>\n            <Link\n              to={`/admin/user/${user._id}`}\n              className=\"btn btn-primary btn-sm\"\n            >\n              <i className=\"fa fa-pencil\"></i>\n            </Link>\n            <Button\n              className=\"btn btn-danger btn-sm ml-2\"\n              onClick={(e) => deleteHandler(e, user._id)}\n            >\n              <i className=\"fa fa-trash\"></i>\n            </Button>\n          </Fragment>\n        ),\n      })),\n    };\n  }, [users]);\n\n  return (\n    <div className=\"row\">\n      <MetaData title={\"Users List\"} />\n\n      <div className=\"col-12 col-md-2\">\n        <Sidebar />\n      </div>\n\n      <div className=\"col-12 col-md-10\">\n        <h1 className=\"my-4\">Users List</h1>\n        <Fragment>\n          {loading ? (\n            <Loader />\n          ) : (\n            <MDBDataTable\n              data={data}\n              bordered\n              striped\n              hover\n              className=\"px-3\"\n            />\n          )}\n        </Fragment>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}