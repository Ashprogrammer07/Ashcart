{"ast":null,"code":"import{Fragment,useEffect}from\"react\";import MetaData from\"../layouts/MetaData\";import{Link,useNavigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{validateShipping}from\"./shipping\";import'react-toastify/dist/ReactToastify.css';import CheckoutSteps from\"./checkoutSteps\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ConfirmOrder(){const navigate=useNavigate();const{items:cartItems,shippingInfo}=useSelector(state=>state.cartState);const{user}=useSelector(state=>state.authState);const itemsPrice=cartItems.reduce((acc,item)=>acc+item.price*item.quantity,0);const shippingPrice=itemsPrice>200?0:25;const taxPrice=Number((0.05*itemsPrice).toFixed(2));// Correct type\nconst totalPrice=Number((itemsPrice+shippingPrice+taxPrice).toFixed(2));// Safe sum\nuseEffect(()=>{console.log(\"Shipping Info:\",shippingInfo);validateShipping(shippingInfo,navigate);},[]);const processPayment=()=>{const data={itemsPrice,shippingPrice,taxPrice,totalPrice};console.log(\"totalPrice before saving:\",totalPrice);sessionStorage.setItem('orderInfo',JSON.stringify(data));setTimeout(navigate('/payment'),2000);};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Confirm Order\"}),/*#__PURE__*/_jsx(CheckoutSteps,{shipping:true,confirmorder:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-8 mt-5 order-confirm\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Shipping Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Phone:\"}),\" \",shippingInfo.phoneno]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Address:\"}),\" \",shippingInfo.address,\",\",shippingInfo.city,\",\",shippingInfo.postalcode,\",\",shippingInfo.state,\",\",shippingInfo.country]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-4\",children:\"Your Cart Items:\"}),cartItems.map(item=>/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item my-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"Laptop\",height:\"45\",width:\"65\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-lg-6\",children:/*#__PURE__*/_jsx(Link,{to:\"products/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-4 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"p\",{children:[item.quantity,\" x $\",item.price,\" = \",/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",item.quantity*item.price]})]})})]})}),/*#__PURE__*/_jsx(\"hr\",{})]}))]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-3 my-4\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"order_summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal:  \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",itemsPrice]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Shipping: \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",shippingPrice]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tax:  \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",taxPrice]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",totalPrice]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"checkout_btn\",className:\"btn btn-primary btn-block\",onClick:processPayment,children:\"Proceed to Payment\"})]})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","MetaData","Link","useNavigate","useSelector","validateShipping","CheckoutSteps","jsx","_jsx","jsxs","_jsxs","ConfirmOrder","navigate","items","cartItems","shippingInfo","state","cartState","user","authState","itemsPrice","reduce","acc","item","price","quantity","shippingPrice","taxPrice","Number","toFixed","totalPrice","console","log","processPayment","data","sessionStorage","setItem","JSON","stringify","setTimeout","children","title","shipping","confirmorder","className","name","phoneno","address","city","postalcode","country","map","src","image","alt","height","width","to","concat","product","id","onClick"],"sources":["/home/ashwin/Documents/GitHub/Ashcart/frontend/src/components/cart/confirmorder.js"],"sourcesContent":["import { Fragment, useEffect } from \"react\";\nimport MetaData from \"../layouts/MetaData\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { validateShipping } from \"./shipping\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport CheckoutSteps from \"./checkoutSteps\";\nexport default function ConfirmOrder(){\n    const navigate=useNavigate();\n    const {items:cartItems,shippingInfo}=useSelector(state=>state.cartState)\n    const {user}=useSelector(state=>state.authState)\n   const itemsPrice = cartItems.reduce((acc, item) => acc + item.price * item.quantity, 0);\n\nconst shippingPrice = itemsPrice > 200 ? 0 : 25;\n\nconst taxPrice = Number((0.05 * itemsPrice).toFixed(2)); // Correct type\n\nconst totalPrice = Number((itemsPrice + shippingPrice + taxPrice).toFixed(2)); // Safe sum\n\n\n    \n\n    useEffect(() => {\n         console.log(\"Shipping Info:\", shippingInfo);\n\n    validateShipping(shippingInfo,navigate);\n    \n}, []);\n        const processPayment=()=>{\n            const data={\n                itemsPrice,\n                shippingPrice,\n                taxPrice,\n                totalPrice,\n            }\n            console.log(\"totalPrice before saving:\", totalPrice);\n\n            sessionStorage.setItem('orderInfo',JSON.stringify(data))\n            setTimeout(navigate('/payment'),2000)\n        }\n    return(\n        <Fragment>\n            <MetaData title={\"Confirm Order\"}/>\n            <CheckoutSteps shipping confirmorder/>\n            <div className=\"row d-flex justify-content-between\">\n            <div className=\"col-12 col-lg-8 mt-5 order-confirm\">\n\n                <h4 className=\"mb-3\">Shipping Info</h4>\n                <p><b>Name:</b> {user.name}</p>\n                <p><b>Phone:</b> {shippingInfo.phoneno}</p>\n                <p className=\"mb-4\"><b>Address:</b> {shippingInfo.address},{shippingInfo.city},{shippingInfo.postalcode},{shippingInfo.state},{shippingInfo.country}</p>\n                \n                <hr />\n                <h4 className=\"mt-4\">Your Cart Items:</h4>\n                {cartItems.map(item =>(\n                        <Fragment>\n                            <hr />\n                <div className=\"cart-item my-1\">\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-2\">\n                            <img src={item.image} alt=\"Laptop\" height=\"45\" width=\"65\"/>\n                        </div>\n\n                        <div className=\"col-5 col-lg-6\">\n                            <Link to={`products/${item.product}`}>\n                            {item.name}\n                            </Link>                        \n                            </div>\n\n\n                        <div className=\"col-4 col-lg-4 mt-4 mt-lg-0\">\n                            <p>{item.quantity} x ${item.price} = <b>${item.quantity * item.price}</b></p>\n                        </div>\n\n                    </div>\n                </div>\n                <hr />\n                        </Fragment>\n                ))}\n                \n\n            </div>\n\t\t\t\n\t\t\t<div className=\"col-12 col-lg-3 my-4\">\n                    <div id=\"order_summary\">\n                        <h4>Order Summary</h4>\n                        <hr />\n                        <p>Subtotal:  <span className=\"order-summary-values\">${itemsPrice}</span></p>\n                        <p>Shipping: <span className=\"order-summary-values\">${shippingPrice}</span></p>\n                        <p>Tax:  <span className=\"order-summary-values\">${taxPrice}</span></p>\n\n                        <hr />\n\n                        <p>Total: <span className=\"order-summary-values\">${totalPrice}</span></p>\n\n                        <hr />\n                        <button id=\"checkout_btn\" className=\"btn btn-primary btn-block\" onClick={processPayment}>Proceed to Payment</button>\n                    </div>\n                </div>\n\t\t\t\n\t\t\t\n        </div>\n        </Fragment>\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}