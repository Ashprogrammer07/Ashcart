{"ast":null,"code":"import{Fragment,useEffect}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{toast}from\"react-toastify\";import MetaData from\"../layouts/MetaData\";import Loader from'../layouts/loader';import{MDBDataTable}from'mdbreact';import Sidebar from\"./sidebar\";import{clearOrderDeleted,clearorderError,clearOrderUpdated}from\"../../slices/orderSlices\";import{adminOrders as adminordersaction,OrderDelete}from\"../../actions/orderActions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function OrderList(){const{adminOrders=[],loading,error,isorderdeleted}=useSelector(state=>state.orderState);const dispatch=useDispatch();const setOrders=adminOrders=>{const data={columns:[{label:\"ID\",field:'id',sort:'asc'},{label:\"Number of Items\",field:'numofItems',sort:'asc'},{label:\"Amount\",field:'amount',sort:'asc'},{label:\"Status\",field:'status',sort:'asc'},{label:\"Actions\",field:'actions',sort:'asc'}],rows:[]};adminOrders.forEach(order=>{data.rows.push({id:order._id,numofItems:order.orderItems.length,amount:\"\\u20B9\".concat(order.totalPrice),status:/*#__PURE__*/_jsx(\"p\",{style:{color:order.orderStatus.includes('Processing')?'red':'green'},children:order.orderStatus}),actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/order/\".concat(order._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-danger py--1 px-2 ml-2\",onClick:e=>deleteHandler(e,order._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};const deleteHandler=(e,id)=>{e.target.disabled=true;dispatch(OrderDelete(id));};useEffect(()=>{// Fetch orders on mount\ndispatch(adminordersaction);},[dispatch]);useEffect(()=>{if(error){toast.error(error,{position:'bottom-center'});dispatch(clearorderError());}if(isorderdeleted){toast.success(\"Order Deleted Successfully!!!\",{position:'bottom-center'});dispatch(clearOrderDeleted());}},[error,isorderdeleted,loading,adminOrders,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(MetaData,{title:\"Order List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"Order List\"}),/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setOrders(adminOrders),bordered:true,striped:true,hover:true,className:\"px-3\"})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","Button","useDispatch","useSelector","Link","toast","MetaData","Loader","MDBDataTable","Sidebar","clearOrderDeleted","clearorderError","clearOrderUpdated","adminOrders","adminordersaction","OrderDelete","jsx","_jsx","jsxs","_jsxs","OrderList","loading","error","isorderdeleted","state","orderState","dispatch","setOrders","data","columns","label","field","sort","rows","forEach","order","push","id","_id","numofItems","orderItems","length","amount","concat","totalPrice","status","style","color","orderStatus","includes","children","actions","to","className","onClick","e","deleteHandler","target","disabled","position","success","title","bordered","striped","hover"],"sources":["/home/ashwin/Documents/GitHub/Ashcart/frontend/src/components/admin/orderList.js"],"sourcesContent":["import { Fragment, useEffect } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nimport MetaData from \"../layouts/MetaData\";\nimport Loader from '../layouts/loader';\nimport { MDBDataTable } from 'mdbreact';\nimport Sidebar from \"./sidebar\";\n\nimport {\n  clearOrderDeleted,\n  clearorderError,\n  clearOrderUpdated\n} from \"../../slices/orderSlices\";\n\nimport {\n  adminOrders as adminordersaction,\n  OrderDelete\n} from \"../../actions/orderActions\";\n\nexport default function OrderList() {\n  const { adminOrders = [], loading, error, isorderdeleted } = useSelector(state => state.orderState);\n  const dispatch = useDispatch();\n\n  const setOrders = (adminOrders) => {\n    const data = {\n      columns: [\n        { label: \"ID\", field: 'id', sort: 'asc' },\n        { label: \"Number of Items\", field: 'numofItems', sort: 'asc' },\n        { label: \"Amount\", field: 'amount', sort: 'asc' },\n        { label: \"Status\", field: 'status', sort: 'asc' },\n        { label: \"Actions\", field: 'actions', sort: 'asc' },\n      ],\n      rows: []\n    };\n\n    adminOrders.forEach(order => {\n      data.rows.push({\n        id: order._id,\n        numofItems: order.orderItems.length,\n        amount: `â‚¹${order.totalPrice}`,\n        status: (\n          <p style={{ color: order.orderStatus.includes('Processing') ? 'red' : 'green' }}>\n            {order.orderStatus}\n          </p>\n        ),\n        actions: (\n          <Fragment>\n            <Link to={`/admin/order/${order._id}`} className=\"btn btn-primary\">\n              <i className=\"fa fa-pencil\"></i>\n            </Link>\n            <Button\n              className=\"btn btn-danger py--1 px-2 ml-2\"\n              onClick={(e) => deleteHandler(e, order._id)}\n            >\n              <i className=\"fa fa-trash\"></i>\n            </Button>\n          </Fragment>\n        ),\n      });\n    });\n\n    return data;\n  };\n\n  const deleteHandler = (e, id) => {\n    e.target.disabled = true;\n    dispatch(OrderDelete(id));\n  };\n\n  useEffect(() => {\n    // Fetch orders on mount\n    dispatch(adminordersaction);\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (error) {\n      toast.error(error, { position: 'bottom-center' });\n      dispatch(clearorderError());\n    }\n\n    if (isorderdeleted) {\n      toast.success(\"Order Deleted Successfully!!!\", { position: 'bottom-center' });\n      dispatch(clearOrderDeleted());\n    }\n\n    \n  }, [error, isorderdeleted, loading, adminOrders, dispatch]);\n\n  return (\n    <div className=\"row\">\n      <MetaData title={\"Order List\"} />\n\n      <div className=\"col-12 col-md-2\">\n        <Sidebar />\n      </div>\n\n      <div className=\"col-12 col-md-10\">\n        <h1 className=\"my-4\">Order List</h1>\n        <Fragment>\n          {loading ? (\n            <Loader />\n          ) : (\n            <MDBDataTable\n              data={setOrders(adminOrders)}\n              bordered\n              striped\n              hover\n              className=\"px-3\"\n            />\n          )}\n        </Fragment>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,MAAM,KAAQ,iBAAiB,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,MAAO,CAAAC,QAAQ,KAAM,qBAAqB,CAC1C,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,OAASC,YAAY,KAAQ,UAAU,CACvC,MAAO,CAAAC,OAAO,KAAM,WAAW,CAE/B,OACEC,iBAAiB,CACjBC,eAAe,CACfC,iBAAiB,KACZ,0BAA0B,CAEjC,OACEC,WAAW,GAAI,CAAAC,iBAAiB,CAChCC,WAAW,KACN,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAClC,KAAM,CAAEP,WAAW,CAAG,EAAE,CAAEQ,OAAO,CAAEC,KAAK,CAAEC,cAAe,CAAC,CAAGpB,WAAW,CAACqB,KAAK,EAAIA,KAAK,CAACC,UAAU,CAAC,CACnG,KAAM,CAAAC,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAyB,SAAS,CAAId,WAAW,EAAK,CACjC,KAAM,CAAAe,IAAI,CAAG,CACXC,OAAO,CAAE,CACP,CAAEC,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAI,CAAEC,IAAI,CAAE,KAAM,CAAC,CACzC,CAAEF,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,YAAY,CAAEC,IAAI,CAAE,KAAM,CAAC,CAC9D,CAAEF,KAAK,CAAE,QAAQ,CAAEC,KAAK,CAAE,QAAQ,CAAEC,IAAI,CAAE,KAAM,CAAC,CACjD,CAAEF,KAAK,CAAE,QAAQ,CAAEC,KAAK,CAAE,QAAQ,CAAEC,IAAI,CAAE,KAAM,CAAC,CACjD,CAAEF,KAAK,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAS,CAAEC,IAAI,CAAE,KAAM,CAAC,CACpD,CACDC,IAAI,CAAE,EACR,CAAC,CAEDpB,WAAW,CAACqB,OAAO,CAACC,KAAK,EAAI,CAC3BP,IAAI,CAACK,IAAI,CAACG,IAAI,CAAC,CACbC,EAAE,CAAEF,KAAK,CAACG,GAAG,CACbC,UAAU,CAAEJ,KAAK,CAACK,UAAU,CAACC,MAAM,CACnCC,MAAM,UAAAC,MAAA,CAAMR,KAAK,CAACS,UAAU,CAAE,CAC9BC,MAAM,cACJ5B,IAAA,MAAG6B,KAAK,CAAE,CAAEC,KAAK,CAAEZ,KAAK,CAACa,WAAW,CAACC,QAAQ,CAAC,YAAY,CAAC,CAAG,KAAK,CAAG,OAAQ,CAAE,CAAAC,QAAA,CAC7Ef,KAAK,CAACa,WAAW,CACjB,CACJ,CACDG,OAAO,cACLhC,KAAA,CAACpB,QAAQ,EAAAmD,QAAA,eACPjC,IAAA,CAACb,IAAI,EAACgD,EAAE,iBAAAT,MAAA,CAAkBR,KAAK,CAACG,GAAG,CAAG,CAACe,SAAS,CAAC,iBAAiB,CAAAH,QAAA,cAChEjC,IAAA,MAAGoC,SAAS,CAAC,cAAc,CAAI,CAAC,CAC5B,CAAC,cACPpC,IAAA,CAAChB,MAAM,EACLoD,SAAS,CAAC,gCAAgC,CAC1CC,OAAO,CAAGC,CAAC,EAAKC,aAAa,CAACD,CAAC,CAAEpB,KAAK,CAACG,GAAG,CAAE,CAAAY,QAAA,cAE5CjC,IAAA,MAAGoC,SAAS,CAAC,aAAa,CAAI,CAAC,CACzB,CAAC,EACD,CAEd,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,MAAO,CAAAzB,IAAI,CACb,CAAC,CAED,KAAM,CAAA4B,aAAa,CAAGA,CAACD,CAAC,CAAElB,EAAE,GAAK,CAC/BkB,CAAC,CAACE,MAAM,CAACC,QAAQ,CAAG,IAAI,CACxBhC,QAAQ,CAACX,WAAW,CAACsB,EAAE,CAAC,CAAC,CAC3B,CAAC,CAEDrC,SAAS,CAAC,IAAM,CACd;AACA0B,QAAQ,CAACZ,iBAAiB,CAAC,CAC7B,CAAC,CAAE,CAACY,QAAQ,CAAC,CAAC,CAEd1B,SAAS,CAAC,IAAM,CACd,GAAIsB,KAAK,CAAE,CACTjB,KAAK,CAACiB,KAAK,CAACA,KAAK,CAAE,CAAEqC,QAAQ,CAAE,eAAgB,CAAC,CAAC,CACjDjC,QAAQ,CAACf,eAAe,CAAC,CAAC,CAAC,CAC7B,CAEA,GAAIY,cAAc,CAAE,CAClBlB,KAAK,CAACuD,OAAO,CAAC,+BAA+B,CAAE,CAAED,QAAQ,CAAE,eAAgB,CAAC,CAAC,CAC7EjC,QAAQ,CAAChB,iBAAiB,CAAC,CAAC,CAAC,CAC/B,CAGF,CAAC,CAAE,CAACY,KAAK,CAAEC,cAAc,CAAEF,OAAO,CAAER,WAAW,CAAEa,QAAQ,CAAC,CAAC,CAE3D,mBACEP,KAAA,QAAKkC,SAAS,CAAC,KAAK,CAAAH,QAAA,eAClBjC,IAAA,CAACX,QAAQ,EAACuD,KAAK,CAAE,YAAa,CAAE,CAAC,cAEjC5C,IAAA,QAAKoC,SAAS,CAAC,iBAAiB,CAAAH,QAAA,cAC9BjC,IAAA,CAACR,OAAO,GAAE,CAAC,CACR,CAAC,cAENU,KAAA,QAAKkC,SAAS,CAAC,kBAAkB,CAAAH,QAAA,eAC/BjC,IAAA,OAAIoC,SAAS,CAAC,MAAM,CAAAH,QAAA,CAAC,YAAU,CAAI,CAAC,cACpCjC,IAAA,CAAClB,QAAQ,EAAAmD,QAAA,CACN7B,OAAO,cACNJ,IAAA,CAACV,MAAM,GAAE,CAAC,cAEVU,IAAA,CAACT,YAAY,EACXoB,IAAI,CAAED,SAAS,CAACd,WAAW,CAAE,CAC7BiD,QAAQ,MACRC,OAAO,MACPC,KAAK,MACLX,SAAS,CAAC,MAAM,CACjB,CACF,CACO,CAAC,EACR,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}