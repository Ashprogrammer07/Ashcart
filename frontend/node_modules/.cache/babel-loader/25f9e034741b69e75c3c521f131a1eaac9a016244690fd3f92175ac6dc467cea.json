{"ast":null,"code":"import{Fragment,useEffect}from\"react\";import MetaData from\"../layouts/MetaData\";import{useState}from\"react\";import{clearAutherror,login}from\"../../actions/userActions\";import{useDispatch,useSelector}from\"react-redux\";import{toast}from'react-toastify';import{Link,useLocation,useNavigate}from'react-router-dom';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const dispatch=useDispatch();const location=useLocation();const{loading,error,isauthenticated}=useSelector(state=>state.authState);const navigate=useNavigate();const queryParams=new URLSearchParams(location.search);const redirect=queryParams.get(\"redirect\")?\"/\".concat(queryParams.get(\"redirect\")):\"/\";const submithandler=e=>{e.preventDefault();dispatch(login(email,password));};useEffect(()=>{if(isauthenticated){navigate(redirect);}if(error){toast(error,{position:'bottom-center',type:'error',onOpen:()=>{dispatch(clearAutherror);}});return;}},[error,isauthenticated,dispatch,navigate]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",onSubmit:submithandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_field\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password_field\",className:\"form-control\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(Link,{to:\"/password/forgot\",className:\"float-right mb-4\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(\"button\",{id:\"login_button\",type:\"submit\",className:\"btn btn-block py-3\",disabled:loading,children:\"LOGIN\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"float-right mt-3\",children:\"New User?\"})]})})})]});}","map":{"version":3,"names":["Fragment","useEffect","MetaData","useState","clearAutherror","login","useDispatch","useSelector","toast","Link","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","dispatch","location","loading","error","isauthenticated","state","authState","navigate","queryParams","URLSearchParams","search","redirect","get","concat","submithandler","e","preventDefault","position","type","onOpen","children","title","className","onSubmit","htmlFor","id","value","onChange","target","to","disabled"],"sources":["/home/ashwin/Documents/GitHub/Ashcart/frontend/src/components/user/login.js"],"sourcesContent":["import { Fragment, useEffect } from \"react\";\nimport MetaData from \"../layouts/MetaData\";\nimport { useState } from \"react\";\nimport { clearAutherror, login } from \"../../actions/userActions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {toast} from 'react-toastify';\nimport {Link, useLocation, useNavigate} from 'react-router-dom';\nimport 'react-toastify/dist/ReactToastify.css';\nexport default  function Login(){\n     const [email,setEmail]=useState(\"\");\n      const [password,setPassword]=useState(\"\");\n      const dispatch= useDispatch();\n      const location=useLocation();\n      const {loading,error,isauthenticated}=useSelector(state=>state.authState);\n      const navigate= useNavigate();\n      const queryParams = new URLSearchParams(location.search);\nconst redirect = queryParams.get(\"redirect\") ? `/${queryParams.get(\"redirect\")}` : \"/\";\n      const submithandler=(e)=>{\n        e.preventDefault();\n    dispatch(login(email,password))}\n    useEffect(()=>{\n      if(isauthenticated){\n        navigate(redirect)\n      }\n      if(error){\n          toast(error,{\n            position: 'bottom-center',\n            type: 'error',\n            onOpen: ()=>{dispatch(clearAutherror)}\n          })\n          return\n      }\n    },[error,isauthenticated,dispatch,navigate])\n      \n    return(\n        <Fragment>\n            <MetaData title={\"Login\"}/>\n          <div className=\"row wrapper\"> \n\t\t<div className=\"col-10 col-lg-5\">\n        <form className=\"shadow-lg\" onSubmit={submithandler}>\n            <h1 className=\"mb-3\">Login</h1>\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email_field\"\n                className=\"form-control\"\n                value={email}\n                onChange={e=> setEmail(e.target.value)}\n              />\n            </div>\n  \n            <div className=\"form-group\">\n              <label htmlFor=\"password_field\">Password</label>\n              <input\n                type=\"password\"\n                id=\"password_field\"\n                className=\"form-control\"\n                value={password}\n                onChange={e=> setPassword(e.target.value)}\n              />\n            </div>\n\n            <Link to='/password/forgot' className=\"float-right mb-4\">Forgot Password?</Link>\n  \n            <button\n              id=\"login_button\"\n              type=\"submit\"\n              className=\"btn btn-block py-3\"\n              disabled={loading}\n            >\n              LOGIN\n            </button>\n\n            <Link to='/register' className=\"float-right mt-3\">New User?</Link>\n          </form>\n\t\t  </div>\n    </div>\n    </Fragment>\n    )\n}"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,QAAQ,KAAM,qBAAqB,CAC1C,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,cAAc,CAAEC,KAAK,KAAQ,2BAA2B,CACjE,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAAQC,KAAK,KAAO,gBAAgB,CACpC,OAAQC,IAAI,CAAEC,WAAW,CAAEC,WAAW,KAAO,kBAAkB,CAC/D,MAAO,uCAAuC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAC/C,cAAgB,SAAS,CAAAC,KAAKA,CAAA,CAAE,CAC3B,KAAM,CAACC,KAAK,CAACC,QAAQ,CAAC,CAACf,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACgB,QAAQ,CAACC,WAAW,CAAC,CAACjB,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAAAkB,QAAQ,CAAEf,WAAW,CAAC,CAAC,CAC7B,KAAM,CAAAgB,QAAQ,CAACZ,WAAW,CAAC,CAAC,CAC5B,KAAM,CAACa,OAAO,CAACC,KAAK,CAACC,eAAe,CAAC,CAAClB,WAAW,CAACmB,KAAK,EAAEA,KAAK,CAACC,SAAS,CAAC,CACzE,KAAM,CAAAC,QAAQ,CAAEjB,WAAW,CAAC,CAAC,CAC7B,KAAM,CAAAkB,WAAW,CAAG,GAAI,CAAAC,eAAe,CAACR,QAAQ,CAACS,MAAM,CAAC,CAC9D,KAAM,CAAAC,QAAQ,CAAGH,WAAW,CAACI,GAAG,CAAC,UAAU,CAAC,KAAAC,MAAA,CAAOL,WAAW,CAACI,GAAG,CAAC,UAAU,CAAC,EAAK,GAAG,CAChF,KAAM,CAAAE,aAAa,CAAEC,CAAC,EAAG,CACvBA,CAAC,CAACC,cAAc,CAAC,CAAC,CACtBhB,QAAQ,CAAChB,KAAK,CAACY,KAAK,CAACE,QAAQ,CAAC,CAAC,EAAC,CAChClB,SAAS,CAAC,IAAI,CACZ,GAAGwB,eAAe,CAAC,CACjBG,QAAQ,CAACI,QAAQ,CAAC,CACpB,CACA,GAAGR,KAAK,CAAC,CACLhB,KAAK,CAACgB,KAAK,CAAC,CACVc,QAAQ,CAAE,eAAe,CACzBC,IAAI,CAAE,OAAO,CACbC,MAAM,CAAEA,CAAA,GAAI,CAACnB,QAAQ,CAACjB,cAAc,CAAC,EACvC,CAAC,CAAC,CACF,OACJ,CACF,CAAC,CAAC,CAACoB,KAAK,CAACC,eAAe,CAACJ,QAAQ,CAACO,QAAQ,CAAC,CAAC,CAE5C,mBACIb,KAAA,CAACf,QAAQ,EAAAyC,QAAA,eACL5B,IAAA,CAACX,QAAQ,EAACwC,KAAK,CAAE,OAAQ,CAAC,CAAC,cAC7B7B,IAAA,QAAK8B,SAAS,CAAC,aAAa,CAAAF,QAAA,cACpC5B,IAAA,QAAK8B,SAAS,CAAC,iBAAiB,CAAAF,QAAA,cAC1B1B,KAAA,SAAM4B,SAAS,CAAC,WAAW,CAACC,QAAQ,CAAET,aAAc,CAAAM,QAAA,eAChD5B,IAAA,OAAI8B,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,OAAK,CAAI,CAAC,cAC/B1B,KAAA,QAAK4B,SAAS,CAAC,YAAY,CAAAF,QAAA,eACzB5B,IAAA,UAAOgC,OAAO,CAAC,aAAa,CAAAJ,QAAA,CAAC,OAAK,CAAO,CAAC,cAC1C5B,IAAA,UACE0B,IAAI,CAAC,OAAO,CACZO,EAAE,CAAC,aAAa,CAChBH,SAAS,CAAC,cAAc,CACxBI,KAAK,CAAE9B,KAAM,CACb+B,QAAQ,CAAEZ,CAAC,EAAGlB,QAAQ,CAACkB,CAAC,CAACa,MAAM,CAACF,KAAK,CAAE,CACxC,CAAC,EACC,CAAC,cAENhC,KAAA,QAAK4B,SAAS,CAAC,YAAY,CAAAF,QAAA,eACzB5B,IAAA,UAAOgC,OAAO,CAAC,gBAAgB,CAAAJ,QAAA,CAAC,UAAQ,CAAO,CAAC,cAChD5B,IAAA,UACE0B,IAAI,CAAC,UAAU,CACfO,EAAE,CAAC,gBAAgB,CACnBH,SAAS,CAAC,cAAc,CACxBI,KAAK,CAAE5B,QAAS,CAChB6B,QAAQ,CAAEZ,CAAC,EAAGhB,WAAW,CAACgB,CAAC,CAACa,MAAM,CAACF,KAAK,CAAE,CAC3C,CAAC,EACC,CAAC,cAENlC,IAAA,CAACJ,IAAI,EAACyC,EAAE,CAAC,kBAAkB,CAACP,SAAS,CAAC,kBAAkB,CAAAF,QAAA,CAAC,kBAAgB,CAAM,CAAC,cAEhF5B,IAAA,WACEiC,EAAE,CAAC,cAAc,CACjBP,IAAI,CAAC,QAAQ,CACbI,SAAS,CAAC,oBAAoB,CAC9BQ,QAAQ,CAAE5B,OAAQ,CAAAkB,QAAA,CACnB,OAED,CAAQ,CAAC,cAET5B,IAAA,CAACJ,IAAI,EAACyC,EAAE,CAAC,WAAW,CAACP,SAAS,CAAC,kBAAkB,CAAAF,QAAA,CAAC,WAAS,CAAM,CAAC,EAC9D,CAAC,CACR,CAAC,CACD,CAAC,EACI,CAAC,CAEf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}